language: go

go:
  - "1.10.x"
  - master

before_install:
  - go get github.com/onsi/ginkgo/ginkgo
  - curl https://glide.sh/get | sh

script:
  - echo "${GOPATH}"
  - go version
  - ginkgo version
  - glide --version
#  - glide up -v
  - make build-flexy
  - ginkgo -v -skip="\[Main\] Flexy" ./build/flexy.test

after_success:
  - make RELEASE=${RELEASE} GH_TOKEN=${GH_TOKEN} TRAVIS="${TRAVIS}" TRAVIS_BUILD_NUMBER="${TRAVIS_BUILD_NUMBER}" TRAVIS_BUILD_ID="${TRAVIS_BUILD_ID}" TRAVIS_JOB_NUMBER="${TRAVIS_JOB_NUMBER}" release-flexy
